{"ast":null,"code":"import _toConsumableArray from\"/Users/romansingh/Documents/project4/network-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/romansingh/Documents/project4/network-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{loadPosts}from'../lookup';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function PostsComponent(props){var textAreaRef=/*#__PURE__*/React.createRef();//React refs make it possible for you to directly access the DOM in React.\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),newPosts=_useState2[0],setNewPosts=_useState2[1];var handleSubmit=function handleSubmit(event){event.preventDefault();//if intended action does not occur prevent default action\nvar newVal=textAreaRef.current.value;//set newVal equal to the value of the text area\nvar tempNewPosts=_toConsumableArray(newPosts);//create variable tempNewPosts and set it to newPosts array\ntempNewPosts.unshift({//add new element to tempnewposts array\ntweet:newVal,likes:0,id:12313});setNewPosts(tempNewPosts);//change the state of setNewPosts to tempNewPosts\ntextAreaRef.current.value='';// set text area to be blank after submit\n};return/*#__PURE__*/_jsxs(\"div\",{className:props.className,children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"textarea\",{ref:textAreaRef,required:true,className:\"form-control\",name:\"tweet\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary my-3\",children:\"Post\"})]})}),/*#__PURE__*/_jsx(PostsList,{newPosts:newPosts})]});}export function PostsList(props){var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),PostsInit=_useState4[0],setPostsInit=_useState4[1];//initialize PostsInit and setPostsIinit\nvar _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),Posts=_useState6[0],setPosts=_useState6[1];//initialize Posts and setPosts\n//setPostsInit([...props.newPosts].concat(PostsInit))\nuseEffect(function(){var final=_toConsumableArray(props.newPosts).concat(PostsInit);//join newPosts and PostsInit array\nif(final.length!==Posts.length){setPosts(final);//update setPosts with final\n}},[props.newPosts,Posts,PostsInit]);useEffect(function(){var myCallback=function myCallback(response,status){if(status===200){var finalPostsInit=_toConsumableArray(response).concat();setPostsInit(finalPostsInit);}else{alert(\"There was an error\");}};loadPosts(myCallback);},[PostsInit]);return Posts.map(function(item,index){return/*#__PURE__*/_jsx(Post,{Post:item,className:\"my-5 py-5 border bg-white text-dark\"},\"\".concat(index,\"-{item.id}\"));});}export function ActionBtn(props){var Post=props.Post,action=props.action;var _useState7=useState(Post.likes?Post.likes:0),_useState8=_slicedToArray(_useState7,2),likes=_useState8[0],setLikes=_useState8[1];var _useState9=useState(Post.userLike===true?true:false),_useState10=_slicedToArray(_useState9,2),userLike=_useState10[0],setUserLike=_useState10[1];var className=props.className?props.className:'btn btn-primary btn-sm';var actionDisplay=action.display?action.display:'Action';var handleClick=function handleClick(event){event.preventDefault();if(action.type==='like'){if(userLike===true){// perhaps i Unlike it?\nsetLikes(likes-1);setUserLike(false);}else{setLikes(likes+1);setUserLike(true);}}};var display=action.type==='like'?\"\".concat(likes,\" \").concat(actionDisplay):actionDisplay;return/*#__PURE__*/_jsx(\"button\",{className:className,onClick:handleClick,children:display});}export function Post(props){var Post=props.Post;var className=props.className?props.className:'col-10 mx-auto col-md-6';return/*#__PURE__*/_jsxs(\"div\",{className:className,children:[/*#__PURE__*/_jsxs(\"p\",{children:[Post.id,\" - \",Post.tweet]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn btn-group\",children:[/*#__PURE__*/_jsx(ActionBtn,{Post:Post,action:{type:\"like\",display:\"Likes\"}}),/*#__PURE__*/_jsx(ActionBtn,{Post:Post,action:{type:\"unlike\",display:\"Unlike\"}}),/*#__PURE__*/_jsx(ActionBtn,{Post:Post,action:{type:\"retweet\",display:\"\"}})]})]});}","map":{"version":3,"sources":["/Users/romansingh/Documents/project4/network-web/src/posts/components.js"],"names":["React","useEffect","useState","loadPosts","PostsComponent","props","textAreaRef","createRef","newPosts","setNewPosts","handleSubmit","event","preventDefault","newVal","current","value","tempNewPosts","unshift","tweet","likes","id","className","PostsList","PostsInit","setPostsInit","Posts","setPosts","final","concat","length","myCallback","response","status","finalPostsInit","alert","map","item","index","ActionBtn","Post","action","setLikes","userLike","setUserLike","actionDisplay","display","handleClick","type"],"mappings":"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","sourcesContent":["import React, {useEffect, useState}  from 'react'\n\nimport {loadPosts} from '../lookup'\n\nexport function PostsComponent(props) {\n  const textAreaRef = React.createRef() //React refs make it possible for you to directly access the DOM in React.\n  const [newPosts, setNewPosts] = useState([]) \n  const handleSubmit = (event) => { \n    event.preventDefault() //if intended action does not occur prevent default action\n    const newVal = textAreaRef.current.value //set newVal equal to the value of the text area\n    let tempNewPosts = [...newPosts] //create variable tempNewPosts and set it to newPosts array\n    tempNewPosts.unshift({ //add new element to tempnewposts array\n      tweet: newVal,\n      likes: 0,\n      id: 12313\n    })\n    setNewPosts(tempNewPosts) //change the state of setNewPosts to tempNewPosts\n    textAreaRef.current.value = '' // set text area to be blank after submit\n  }\n  return <div className={props.className}>\n          <div className='col-12 mb-3'>\n            <form onSubmit={handleSubmit}>\n              <textarea ref={textAreaRef} required={true} className='form-control' name='tweet'>\n\n              </textarea>\n              <button type='submit' className='btn btn-primary my-3'>Post</button>\n          </form>\n          </div>\n      <PostsList newPosts = {newPosts}/>\n  </div>\n}\n\n\nexport function PostsList(props) {\n    const [PostsInit, setPostsInit] = useState([]) //initialize PostsInit and setPostsIinit\n    const [Posts, setPosts] = useState([]) //initialize Posts and setPosts\n    //setPostsInit([...props.newPosts].concat(PostsInit))\n    \n    useEffect(() => {\n    const final = [...props.newPosts].concat(PostsInit) //join newPosts and PostsInit array\n     if (final.length !== Posts.length) {\n       setPosts(final) //update setPosts with final\n     }\n  }, [props.newPosts, Posts, PostsInit]) \n    \n    \n    useEffect(() => {\n      const myCallback = (response, status) => {\n        if (status === 200){\n          const finalPostsInit = [...response].concat()\n          setPostsInit(finalPostsInit)\n        } else {\n          alert(\"There was an error\")\n        }\n      }      \n      loadPosts(myCallback)\n    }, [PostsInit])\n    return Posts.map((item, index)=>{\n      return <Post Post={item} className='my-5 py-5 border bg-white text-dark' key={`${index}-{item.id}`} />\n    })\n  }\n\n\n  export function ActionBtn(props) {\n    const {Post, action} = props\n    const [likes, setLikes] = useState(Post.likes ? Post.likes : 0)\n    const [userLike, setUserLike] = useState(Post.userLike === true ? true : false)\n    const className = props.className ? props.className : 'btn btn-primary btn-sm'\n    const actionDisplay = action.display ? action.display : 'Action'\n    \n    const handleClick = (event) => {\n      event.preventDefault()\n      if (action.type === 'like') {\n        if (userLike === true) {\n          // perhaps i Unlike it?\n          setLikes(likes - 1)\n          setUserLike(false)\n        } else {\n          setLikes(likes + 1)\n          setUserLike(true)\n        }\n        \n      }\n    }\n    const display = action.type === 'like' ? `${likes} ${actionDisplay}` : actionDisplay\n    return <button className={className} onClick={handleClick}>{display}</button>\n  }\n  \n  \n  export function Post(props) {\n    const {Post} = props\n    const className = props.className ? props.className : 'col-10 mx-auto col-md-6'\n    return <div className={className}>\n        <p>{Post.id} - {Post.tweet}</p>\n        <div className='btn btn-group'>\n          <ActionBtn Post={Post} action={{type: \"like\", display:\"Likes\"}}/>\n          <ActionBtn Post={Post} action={{type: \"unlike\", display:\"Unlike\"}}/>\n          <ActionBtn Post={Post} action={{type: \"retweet\", display:\"\"}}/>\n        </div>\n    </div>\n  }"]},"metadata":{},"sourceType":"module"}